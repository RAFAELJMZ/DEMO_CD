<!--
=========================================================
* Argon Dashboard 3 - v2.1.0
=========================================================

* Product Page: https://www.creative-tim.com/product/argon-dashboard
* Copyright 2024 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://www.creative-tim.com/license)
* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
{%extends 'base.html'%}
{% load static %}

<body class="">
{%block content%}
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg position-absolute top-0 z-index-3 w-100 shadow-none my-3 navbar-transparent mt-4">
    
  </nav>
  <!-- End Navbar -->
  <main class="main-content  mt-0">
    <div class="page-header align-items-start min-vh-50 pt-5 pb-11 m-3 border-radius-lg" style="background-image: url('https://raw.githubusercontent.com/creativetimofficial/public-assets/master/argon-dashboard-pro/assets/img/signup-cover.jpg'); background-position: top;">
      <span class="mask bg-gradient-dark opacity-3"></span>
      <div class="container">
        <div class="row justify-content-center">
          
        </div>
      </div>
    </div>
    <div class="container">
    <div class="row mt-lg-n10 mt-md-n11 mt-n10 justify-content-center">
        <div class="col-xl-4 col-lg-5 col-md-7 mx-auto">
            <div class="card z-index-0">
                <!-- Imagen de perfil mejorada -->
                <div class="card-header text-center pt-4 pb-0">
                    <div class="d-flex justify-content-center">
                        <div class="position-relative">
                            <a href="javascript:;" class="avatar avatar-xl rounded-circle border border-4 border-white shadow">
                                {% if profile.photo %}
                                    <img src="{{ profile.photo.url }}" alt="Foto de perfil" class="w-100 rounded-circle">
                                {% else %}
                                    <img src="{% static 'assets/img/default-profile.png' %}" alt="Foto por defecto" class="w-100 rounded-circle">
                                {% endif %}
                                <span class="position-absolute bottom-0 end-0 bg-primary rounded-circle p-2 shadow-sm">
                                    <i class="ni ni-camera-compact text-white"></i>
                                </span>
                            </a>
                        </div>
                    </div>
                </div>

             
           

                <form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    
    {% if messages %}
        {% for message in messages %}
        <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}success{% endif %}">
            {{ message }}
        </div>
        {% endfor %}
    {% endif %}

    <div class="card">
        <div class="card-header">
            <h5>Editar Perfil</h5>
        </div>
       
        <div class="card-body">
            <div class="row">
                <!-- Username -->
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Username</label>
                        <input type="text" name="username" value="{{ form.username.value|default_if_none:'' }}"
                               class="form-control {% if form.username.errors %}is-invalid{% endif %}">
                        {% if form.username.errors %}
                            <div class="invalid-feedback">
                                {{ form.username.errors|join:", " }}
                            </div>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Nombre -->
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Nombre</label>
                        <input type="text" name="name" value="{{ form.name.value|default_if_none:'' }}"
                               class="form-control {% if form.name.errors %}is-invalid{% endif %}">
                        {% if form.name.errors %}
                            <div class="invalid-feedback">
                                {{ form.name.errors|join:", " }}
                            </div>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Teléfono -->
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Teléfono</label>
                        <input type="text" name="phone" value="{{ form.phone.value|default_if_none:'' }}"
                               class="form-control {% if form.phone.errors %}is-invalid{% endif %}">
                        {% if form.phone.errors %}
                            <div class="invalid-feedback">
                                {{ form.phone.errors|join:", " }}
                            </div>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Email -->
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="email" value="{{ form.email.value|default_if_none:'' }}"
                               class="form-control {% if form.email.errors %}is-invalid{% endif %}">
                        {% if form.email.errors %}
                            <div class="invalid-feedback">
                                {{ form.email.errors|join:", " }}
                            </div>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Foto -->
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Foto de perfil</label>
                        <input type="file" name="photo" 
                               class="form-control {% if form.photo.errors %}is-invalid{% endif %}">
                        {% if profile.photo %}
                            <small class="text-muted">
                                Foto actual: <a href="{{ profile.photo.url }}" target="_blank">Ver</a>
                                <div class="form-check mt-2">
                                    <input class="form-check-input" type="checkbox" name="photo-clear" id="photo-clear">
                                    <label class="form-check-label" for="photo-clear">
                                        Eliminar foto actual
                                    </label>
                                </div>
                            </small>
                        {% endif %}
                        {% if form.photo.errors %}
                            <div class="invalid-feedback">
                                {{ form.photo.errors|join:", " }}
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        <div class="card-footer text-end">
            <button type="submit" class="btn btn-primary">Guardar cambios</button>
            <a href="{% url 'profile' %}" class="btn btn-secondary">Cancelar</a>
        </div>
    </div>
</form>


          </div>
        </div>
      </div>
    </div>
  </main>
  <!-- -------- START FOOTER 3 w/ COMPANY DESCRIPTION WITH LINKS & SOCIAL ICONS & COPYRIGHT ------- -->
  
  <!-- -------- END FOOTER 3 w/ COMPANY DESCRIPTION WITH LINKS & SOCIAL ICONS & COPYRIGHT ------- -->
  <!--   Core JS Files   -->
  <script src="{%static 'assets/js/core/popper.min.js'%}"></script>
  <script src="{%static 'assets/js/core/bootstrap.min.js'%}"></script>
  <script src="{%static 'assets/js/plugins/perfect-scrollbar.min.js'%}"></script>
  <script src="{%static 'assets/js/plugins/smooth-scrollbar.min.js'%}"></script>
  <script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
  </script>
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="{%static 'assets/js/argon-dashboard.min.js'%}"></script>
</body>

  {% endblock %}
